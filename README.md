# interview

# 面试总结

## Redis的淘汰机制有哪些?

## Redis频繁的get,set操作,如何解决网络开销的问题?

## Redis的数据结构都有哪些?有什么应用场景?什么叫原子性？

## memcache 和 Redis有什么区别?

## 雪崩, 击穿, 穿透 是怎么回事

## 什么叫回表?

## innodb的事务特性有哪些?

## 什么叫 脏读, 幻读...?

## 第三方对接的时候, 我方的接口逻辑比较复杂, 好几个类好几个方法, 如何快速定为代码问题?

## 500 ，502，504有什么区别？什么情况下会产生这个状态码，如何定位问题？遇到问题怎么修复？思路是什么？



## Linux 统计接口出现200的情况做个排序，每个接口在哪个时间段访问过多少次，做个排序



## 接口除了问题，怎么解决？有一部分功能不好使，有一部分功能好使，怎么解决？



## 500 ，502，504有什么区别？什么情况下会产生这个状态码，如何定位问题？遇到问题怎么修复？思路是什么？

## Linux 统计接口出现200的情况做个排序，每个接口在哪个时间段访问过多少次，做个排序

## 接口除了问题，怎么解决？有一部分功能不好使，有一部分功能好使，怎么解决？

## 什么叫索引覆盖？用索引覆盖为什么会快？

## 索引的结构是怎么样的？

## innodb索引的结构是什么样的？

## 索引的原理是什么？

## 联合索引是什么？用的时候要注意什么？
abc上加了索引，ac，bc，ab会用到索引吗？

## 怎么分析sql？explain怎么用？

## mysql优化都有哪些？
## 联表查询怎么优化？

## PHP程序员用到的专业名词有哪些？作为一个专业的程序员要得到面试官的亲来，要多用专业名词

## 设计表要遵循怎么原则，要注意什么？

## 为什么text字段不能和其他的字段一起在一个表？放在一个表会产生什么样的结果？原理是什么？

## 怎么保证和第三方接口的幂等性呢？

## define定义常量和const定义常量有什么区别？

真题：

## 有四个人, a向b借了10元, b向c借了20, c向d借了30,d向a借了40,四人在场, 最少需要动用几元将所有欠款一次付清?



##  有一个存字符的数组， 实现算法， 判断数组里的字符正序和反序是否一样， 空格作为无效字符应该过滤。

>  要求：算法的时间复杂度最低，不能使用编程语言本身的函数库

1. 时间复杂度是什么呢？
2. PHP有没有这样的函数呢？如果有的话，那么PHP函数内部是怎么实现的这个东西呢？
3. 空格怎么处理呢？
4. 怎么计算自己写的算法的时间复杂度呢？

## 三只蚂蚁从正三角形的三个顶点沿着边移动, 速度相同,他们碰头的概率是多少?



## 匹配手机号的正则?

## 匹配邮箱的正则?

## 只用加减乘除， 求正数a的平方根

1. PHP内部是不是就是只用加减乘除这么实现的？
2. 有没有语言的函数使用了这种方法去实现了平方根求解呢？

## PHP的环境变量有哪些? 有什么应用场景?

## URL从输入到浏览器到展现页面经历的步骤?

## 对字符串表示的算术表达式求值

1. 运算符的优先级怎么处理?
2. 遇到括号怎么办?

## PHP的session扩展默认把session数据存储在什么地方?

## 编写一个静态方法, 用最小代价实现将字符串反转. 比如: abcd,转成dcba

> 要求: 不使用PHP内置函数

## 写函数创建长度为50的数组, 数组中的元素为递增的奇数,首元素为7

## 实现按行读取一个文件内容, 并将非空行以数组形式存储

## 设计一个生产者消费模型的缓存数据结构 和算法, 缓存满的时候按时间最久优先淘汰, 缓存容量大小1000条目.

> 要求: 算法时间复杂度 和空间复杂度 都要良好

1. 什么交空间复杂度?
2. 什么叫良好?
3. 生产者消费模型是什么?
4. 缓存数据结构怎么设计?
5. 算法怎么设计?

# Linux 系统查看文件置顶关键词出现次数

## ['a'=>100,'b'=>200,'c'=>100], 写一个自定义排序函数, 按值降序, 如果值一样, 按键排序

## 程序开发中, 如何提高程序运行效率?

## 设置CT任务, 每小时执行一次ct.php脚本

## $this,self,parent分别代表什么?在什么场景下使用?

## 能够使用HTML和PHP分离开使用的模板有哪些?





# 脏读,幻读,的问题

什么叫脏读?幻读?还有不可重复读? 

脏读,  读到了假数据(脏数据),读脏

幻读,在同一个事务中, 有或无的问题, 第一次读的时候有, 第二次读的时候无

不可重复读, 在同一个事务中, 两次读的结果不一样

> 什么情况下回发生这种问题?
>
> 并发+事务隔离级别

SQL级别的问题演示,模拟并发

>  脏读

| session1                              | session2                                    |
| ------------------------------------- | ------------------------------------------- |
| begin;                                | begin;                                      |
|                                       | update user set money=money+100 where id=1; |
| Select * from user where id=1;        |                                             |
| # 拿着查出来的值去做了一些事情(money) |                                             |
| commit;                               |                                             |
|                                       | rollback;                                   |

>  幻读

| session1                                       | session2                                                |
| ---------------------------------------------- | ------------------------------------------------------- |
| begin;                                         | begin'                                                  |
| select * from interview.user where money=1234; |                                                         |
|                                                | insert interview.user(name,money) value ('张三', 1234); |
|                                                | commit;                                                 |
| select * from user where money=1234;           |                                                         |
| commit;                                        |                                                         |



>  不可重复读

| session1                                                     | session2                                        |
| ------------------------------------------------------------ | ----------------------------------------------- |
| begin;                                                       | begin;                                          |
| select * from intervew.user where id=1;                      |                                                 |
|                                                              | update interview.user set money=111 where id=1; |
|                                                              | commit;                                         |
| select * from interview.user where id=1; -- 这里出来的结果和以前就不一样了 |                                                 |
| commit;                                                      |                                                 |







## 继续思考

隔离级别都有哪些? 

| 隔离级别                  | 脏读   | 不可重复度 | 幻读   |
| ------------------------- | ------ | ---------- | ------ |
| 未提交读(READ UNCOMMITED) | 可能   | 可能       | 可能   |
| 提交读(READ COMMITED)     | 不可能 | 可能       | 可能   |
| 可重复读(REPEATABLE READ) | 不可能 | 不可能     | 可能   |
| 串行化 (SERIALIZABLE)     | 不可能 | 不可能     | 不可能 |

MySQL默认的隔离级别是什么?

默认隔离级别是`可重复读`

如何查看MySQL的隔离级别?

```MySQL
-- 事务隔离级别
-- select @@transaction_isolation;
-- select @@tx_isolation;
show variables like '%isolation%'; -- 这个语句执行了之后, 不同的MySQL版本会有不同的结果
-- 因为, 从5.7.20版本开始, transaction_isolation作为tx_isolation的别名被引入, 在8.0版本后tx_isolation被废弃
-- 也就是说:
-- <5.7.20, 只有tx_isolaiton
-- 5.7.20~8.0 之间 tx_isolation 和 transaction_isolation 都是存在的
-- >=8.0 只有 transaction_isolation
```



在这些隔离级别会有什么问题?

在PHP层面应该注意什么?

这些隔离级别存在的意义什么? 既然有问题可能出现,为什么还存在这些隔离级别? 为什么不直接用串行话, 不用其他的?

隔离级别是怎么实现的?

事务的四个特性(ACID)

1. 原子性atomicity, 一致性consistency, 隔离性isolation,持久性durability

PHP级别的问题

订单积分问题



索引和加行锁的问题会影响并发, 如果修改的条件没有加索引, MySQL会对所有行加锁(有待验证),
然后再释放不满足条件的锁, 这样加锁再释放,就大大降低了并发的性能

没有必要在深入下去了:

怎么看MySQL加了多少锁呢? 怎么看在哪里加了锁?

